<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>demo</title>
	<style>
		.container{
			width:100px;
			line-height:30px;
			border:1px solid;
			text-align:center;
		}
		.item{
			background-color:#9c3;
			cursor:pointer;
		}
		.page-item{
			display:inline-block;
			padding:10px 15px;
			border:1px solid #333;
		}
		.active{
			background-color:#9c3;
			color:#fff;
		}
	</style>
</head>
<body>
	<div id="app">
		<div class="container" @click="getFollow('a',$event)">
			<span class="item" >关注</span>
		</div>
	

		<page-nav v-bind="{
                          'page-num':50,
                          'page-offset':5,
                          'page-slide':2
                          }"></page-nav>

	</div>

<template id="pageNav">
    <div class="pagenav pagenav-02">
        <a href="javascript:void(0);" class="page-prev " v-bind:class="{disable:curPage==1}" v-on:click="prevPage">上一页</a>
        <a href="javascript:void(0);" class="page-item" v-bind:class="{active:curPage==1}" v-on:click="changePage(1)">1</a>
        <a href="javascript:void(0);" class="page-item" v-if="pageNum > pageOffset && curPage>= pageOffset" v-on:click="changePage(curPage-pageOffset)">...</a>
        <a href="javascript:void(0);" v-for="index in pageList" class="page-item" v-bind:class="{active:index==curPage}" v-on:click="changePage(index)">{{index}}</a>
        <a href="javascript:void(0);" class="page-item" v-if="pageNum > pageOffset && pageNum - curPage >= pageOffset" v-on:click="changePage(curPage+pageOffset)">...</a>	
        <a href="javascript:void(0);" class="page-item" v-bind:class="{active:curPage==pageNum}" v-on:click="changePage(pageNum)">{{pageNum}}</a>
        <a href="javascript:void(0);" class="page-next" v-bind:class="{disable:curPage==pageNum}" v-on:click="nextPage">下一页</a>
    </div>
</template>


<script type="text/javascript" src="./vue.min.js"></script>
<script type="text/javascript">

	Vue.component('page-nav',{
        template: "#pageNav",
        props: ['pageNum','pageOffset','pageSlide'],
        data:function () {
        	return {
        		pageList:[],
				pageNum:this.pageNum,
				pageOffset:this.pageOffset,
				pageSlide:this.pageSlide,
        		curPage:1,
        	};
        },
        methods:{
        	changePage:function (index) {
                this.curPage = index;
                // 重新生成新分页
                this.pageList=this.calcPageList(this.curPage);
            },
            prevPage:function () {
                if (this.curPage != 1) {
                    this.curPage--;
                    this.changePage(this.curPage);
                }
            },
            nextPage:function () {
                if (this.curPage != this.pageNum) {
                    this.curPage++;
                    this.changePage(this.curPage);
                }
            },
			calcPageList:function (current) {
				let pageList = [];
				if (this.pageNum > this.pageOffset) { 
					let left = Math.max(this.pageSlide, current - this.pageSlide); 
					let right = Math.min(current + this.pageSlide, this.pageNum - 1);
					if (current - 1 < this.pageSlide) {
						right = this.pageOffset-1;
					}
					if (this.pageNum - current < this.pageSlide) {
						left = this.pageNum - this.pageSlide-1;
					}
					for (let i = left; i <= right; i++) {
						pageList.push(i);
					}
				} else {
					for (let i = this.pageSlide; i < this.pageNum; i++) {
						pageList.push(i);
					}
				}
				console.log(pageList);
				return pageList;
			}
        },
        mounted:function () {
			var _this=this;
			this.$nextTick(function () {
				_this.pageList=_this.calcPageList(_this.curPage);
			});
        }
	});



	var vm=new Vue({
		el:"#app",
		data:{
		},
		methods:{
			getFollow:function (s,ev) {
				console.log(ev.target);
				console.log(ev.srcElement);
			}
		},
		mounted:function () {

		}
	});
</script>
</body>
</html>